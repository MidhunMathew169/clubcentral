<!--header section-->
<%- include("../partials/user/header") %>
<!-- Add Bootstrap and Font Awesome CDN links -->

<style>
        /* .custom-cart-button {
                width: 150px;
                height: 40px;
                font-size: 16px;
                padding: 10px 20px;
                background-color: #4CAF50;
                color: #fff;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s ease;
            } */
            .product-page {
                font-family: 'Poppins', sans-serif;
                color: #333;
                background-color: #f8f9fa;
            }
            .container {
                padding: 0 15px;
                max-width: 1200px;
                margin: 0 auto;
            }
            /* Breadcrumb Styling */
            .breadcrumb-wrap {
                background-color: #f1f1f1;
                padding: 12px 0;
                box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            }
            .breadcrumb a {
                color: #006A67;
                text-decoration: none;
                transition: color 0.3s;
            }
            .breadcrumb a:hover {
                color: #004a47;
            }

            /* Product Image Section */
            .zoom-container {
                border-radius: 10px;
                overflow: hidden;
                box-shadow: 0 5px 15px rgba(0,0,0,0.08);
                transition: all 0.3s ease;
            }
            .zoom-container:hover {
                box-shadow: 0 8px 25px rgba(0,0,0,0.12);
            }
            #wish{
                background-color: #45a049;
                border: none;
                padding: 5px;
                
            }

            #zoomable-image {
                transition: transform 0.3s ease;
                /* Smooth transition for zooming 
                display: block;
                Prevents gaps below the image */
                object-fit: contain;
                background-color: #fff;
            }

            .thumbnail {
                cursor: pointer;
                border: 2px solid transparent;
                border-radius: 8px;
                transition: all 0.3s ease;
            }

            .thumbnail.active, .Thumbnail:hover {
                border-color: #006A67;
                transform: translateY(-2px);
            }

            .thumbnail-wrapper {
                transition: all 0.3s ease;
            }

            .thumbnail-wrapper:hover {
                transform: scale(1.05);
            }

            /* Social Icons */
            .social-share {
                margin-top: 20px;
            }

            .social-icon {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                width: 36px;
                height: 36px;
                border-radius: 50%;
                background-color: #f1f1f1;
                color: #333;
                transition: all 0.3s ease;
            }

            .social-icon:hover {
                background-color: #006A67;
                color: white;
                transform: translate(-3px);
            }



            /* .custom-cart-button:hover {
                background-color: #45a049;
                /* Slightly darker color on hover 
            }*/

            /* .quantity-input {
                width: 80px;
            } */
            
            /* Product Details Styling */
            .detail-info {
                border-radius: 10px;
                padding: 25px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.05);
                transition: all 0.3s ease;
                /* padding: 2rem;
                background: #fff;
                border-radius: 20px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.05);
                transition: all 0.3s ease; */
            }

            .detail-info:hover {
                box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            }

            .product-title {
                font-size: 1.8rem;
                font-weight: 700;
                color: #333;
                margin-bottom: 15px;
            }

            .product-meta {
                background: #f8f9fa;
                border-radius: 8px;
                padding:12px 15px;
                margin-bottom: 20px;
            }
            
            .product-price-wrap {
                margin: 20px 0;
            }

            .current-price {
                font-size: 1.8rem;
                font-weight: 700;
                color: #006A67;
            }

            .old-price {
                text-decoration: line-through;
                color: #999;
                font-size: 1.2rem;
            }

            .discount-badge {
                background-color: #dc3545;
                color: white;
                padding: 5px 10px;
                border-radius: 20px;
                font-size: 0.8rem;
            }

            .separator {
                height: 1px;
                background-color: #e9ecef;
                margin: 20px 0;
            }
            
            /* .title-detail {
                font-size: 2.5rem;
                font-weight: 700;
                color: #2d3436;
                margin-bottom: 1.5rem;
                font-family: 'Segoe UI', sans-serif;
                line-height: 1.2;
            } */
            
            /* Category and Rating */
            .product-detail-rating {
                background: #f8f9fa;
                padding: 1rem 1.5rem;
                border-radius: 15px;
                margin-bottom: 1.5rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            
            /* .pro-details-brand {
                background: #006A67;
                padding: 0.5rem 1.5rem;
                border-radius: 50px;
                transition: all 0.3s ease;
            }
            
            .pro-details-brand span, .pro-details-brand a {
                color: white;
                text-decoration: none;
                font-weight: 500;
            }
            
            .pro-details-brand:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(0,106,103,0.2);
            } */
            
            /* Price Styling */
            .product-price {
                display: flex;
                align-items: center;
                gap: 1rem;
                margin: 1.5rem 0;
            }
            
            .text-brand {
                font-size: 2rem;
                color: #006A67;
                font-weight: 700;
            }
            
            .save-price {
                background: linear-gradient(45deg, #006A67, #00857f);
                color: white;
                padding: 0.5rem 1.5rem;
                border-radius: 50px;
                font-weight: 500;
                animation: pulseSave 2s infinite;
            }
            
            @keyframes pulseSave {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
            
            /* Description */
            .short-desc {
                background: #f8f9fa;
                padding: 1.5rem;
                border-radius: 15px;
                margin: 1.5rem 0;
                transition: all 0.3s ease;
            }
            
            .short-desc:hover {
                transform: translateY(-2px);
                background: #f1f3f5;
            }
            
            /* Product Features */
            .product_sort_info ul {
                list-style: none;
                padding: 0;
            }
            
            .product_sort_info li {
                padding: 1rem 1.5rem;
                background: #f8f9fa;
                border-radius: 10px;
                margin-bottom: 0.8rem;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                gap: 1rem;
            }
            
            .product_sort_info li i {
                color: #006A67;
                font-size: 1.2rem;
            }
            
            .product_sort_info li:hover {
                transform: translateX(10px);
                background: #f1f3f5;
            }

            .section-title {
                font-size: 2rem;
                font-weight: 600;
                margin-top: 0.5rem;
                margin-bottom: 1rem;
            }
            
            /* Stock Status */
            /* .product-meta {
                background: #f8f9fa;
                padding: 1rem 1.5rem;
                border-radius: 10px;
                margin-top: 1.5rem;
            } */
            
            /* .in-stock {
                background: #00b894;
                color: white;
                padding: 0.3rem 1rem;
                border-radius: 50px;
                font-size: 0.9rem;
                font-weight: 500;
            } */
            
            /* Buttons Container */
            /* .detail-extralink {
                display: flex;
                gap: 1rem;
                margin-top: 2rem;
            } */
            
            /* Action Buttons */
            .action-btn {
                width: 45px;
                height: 45px;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                border-radius: 50%;
                background: #f8f9fa;
                color: #006A67;
                transition: all 0.3s ease;
            }
            
            .action-btn:hover {
                background: #006A67;
                color: white;
                transform: rotate(360deg);
            }
            
            /* Responsive Design */
            @media (max-width: 768px) {
                .detail-info {
                    padding: 1rem;
                }
                
                /* .title-detail {
                    font-size: 1.8rem;
                } */
                
                .product-price {
                    flex-direction: column;
                    align-items: flex-start;
                }
                
                /* .detail-extralink {
                    flex-direction: column;
                } */
            }
            
/* Add to Cart Button */
/* #add {
    background: linear-gradient(45deg, #006A67, #00857f);
    color: white;
    border: none;
    padding: 1rem 2.5rem;
    border-radius: 50px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(0,106,103,0.2);
}

#add:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 10px 25px rgba(0,106,103,0.3);
}

#add span {
    display: flex;
    align-items: center;
    gap: 8px;
}

#add i {
    transition: transform 0.3s ease;
}

#add:hover i {
    transform: translateX(5px);
} */

/* Wishlist Button */
/* .wish {
    background: transparent;
    color: #006A67;
    border: 2px solid #006A67;
    padding: 1rem 2.5rem;
    border-radius: 50px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
    margin-top: 1rem;
}

.wish span {
    display: flex;
    align-items: center;
    gap: 8px;
    position: relative;
    z-index: 1;
}

.wish:before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, #006A67, #00857f);
    transition: all 0.5s ease;
    z-index: 0;
}

.wish:hover {
    color: white;
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(0,106,103,0.2);
}

.wish:hover:before {
    left: 0;
}

.wish i {
    transition: transform 0.3s ease;
}

.wish:hover i {
    transform: scale(1.2);
}

@keyframes heartBeat {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.wish.clicked i {
    animation: heartBeat 0.3s ease;
    color: #ff4757;
} */

/* Action Buttons Container */
.action-buttons {
    display: flex;
    gap: 0.5rem;
    margin-top: 1rem;
}
.size-btn {
    min-width: 45px;
    height: 45px;
    border-radius: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-right: 8px;
    margin-bottom: 8px;
    border: 1px solid #dee2e6;
    background-color: white;
    transition: all 0.3s ease;
}
/* .size-btn.selected {
    background-color: #212529;
    color: white;
} */
/*.size-btn-container {
        display: inline-flex;
        flex-direction: column;
        align-items: center;
        margin: 0.5rem;
}
.size-btn {
    min-width: 60px;
    position: relative;
    padding: 0.5rem 1rem;
}*/
.size-btn:hover, .size-btn.active {
    background-color: #006A67;
    color: white;
    border-color: #006A67;
    transform: translateY(-2px);
}
.size-btn.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background-color: #f1f1f1;
}
/* .stock-badge {
    position: absolute;
    top: -8px;
    right: -8px;
    font-size: 0.7em;
    min-width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
} */
/* .size-btn.active {
    background-color: #212529;
    color: white;
} */
/* #quantityInfo {
    background-color: #f8f9fa;
    padding: 1rem;
    border-radius: 0.5rem;
    border: 1px solid #dee2e6;
} */
 .quantity-info {
    background-color: #e8f4f4;
    border-radius: 8px;
    padding: 12px 15px;
    border-left: 4px solid #006A67;
 }
 .product-features ul li {
    padding: 10px 15px;
    background-color: #f8f9fa;
    border-radius: 8px;
    margin-bottom: 10px;
    transition: all 0.3s ease;
 }

 .product-features ul li:hover {
    background-color: #e8f4f4;
    transform: translateX(5px);
 }

 .product-features ul li i {
    color: #006A67;
 }

 /* Action Buttons */
 .product-actions {
    margin-top: 25px;
 }

 .btn-primary {
    background: linear-gradient(45deg, #006A67, #00857f);
    border: none;
    border-radius: 50px;
    padding: 12px 25px;
    font-weight: 600;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0,106,103,0.2);
 }
 .btn-primary:hover {
    background: linear-gradient(45deg, #00857f, #006A67);
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,106,103,0.3);
 }

 .btn-outline-secondary {
    border-radius: 50px;
    padding: 12px 25px;
    font-weight: 600;
    transition: all 0.3s ease;
    border: 2px solid #006A67;
    color: #006A67;
 }
 .btn-outline-secondary:hover {
    background-color: #006A67;
    color: white;
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,106,103,0.3);
 }

 .tab-style3 {
    margin-top: 50px;
 }

 .nav-tabs {
    border-bottom: 2px solid #dee2e6;
    margin-bottom: 20px;
 }

 .nav-tabs .nav-item {
    margin-bottom: -2px;
 }

 .nav-tabs .nav-link {
    border: none;
    border-bottom: 2px solid transparent;
    color: #6c757d;
    font-weight: 600;
    padding: 12px 20px;
    transition: all 0.3s ease;
 }

 .nav-tabs .nav-link:hover {
    color: #006A67;
 }

 .nav-tabs .nav-link.active {
    color: #006A67;
    border-bottom: 2px solid #006A67;
    background-color: transparent;
 }

 .tab-content {
    padding: 20px;
    background-color: white;
    border-radius: 0 0 10px 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
 }

 .footer {
    margin-top: 50px;
    background-color: #212529;
    color: #f8f9fa;
    padding: 50px 0 20px;
 }

 .header {
    background-color: #fff;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    position: sticky;
    top: 0;
    z-index: 1000;
 }

</style>
<main class="main product-page">
    <div class="page-header breadcrumb-wrap bg-light py-3">
        <div class="container">
            <div class="breadcrumb d-flex align-items-center">
                <a href="/" class="text-dark text-decoration-none" rel="nofollow">Home</a>
                <span class="mx-2"><i class="fas fa-chevron-right fa-xs"></i></span>
                <span class="text-muted">Products</span>
                <span class="mx-2"><i class="fas fa-chevron-right fa-xs"></i></span>
                <span class="text-secondary"><%= productData.productName %></span>
            </div>
        </div>
    </div>

    <!-- Product Detail Section -->
    <section class="product-detail-section py-5">
        <div class="container">
            <div class="row">
                        
            <!--product image section-->
            <div class="col-lg-6 col-md-6 mb-4 mb-md-0">
                <div class="detail-gallery">
                    <!--main product image-->
                    <div class="zoom-container position-relative overflow-hidden rounded shadow-sm" onmousemove="zoomIn(event)" onmouseleave="resetZoom()">
                        <img id="zoomable-image" class="img-fluid w-100"
                        height="400" width="400"
                            src="<%= productData.productImage && productData.productImage.length ? '/uploads/re-images/' + productData.productImage[0] : 'images/no_productImage.png' %>" 
                            alt="main image">
                    </div>
                    <!--thumbnails-->
                    <div class="slider-nav-thumbnails mt-3 d-flex flex-wrap justify-content-start">
                        <% productData.productImage.forEach((image,index)=>{ %>
                            <div class="thumbnail-wrapper me-2 mb-2">
                                <img alt="Thumbnail<% index %>" class="Thumbnail rounded cursor-pointer border"
                                height="80" width="80" src="/uploads/re-images/<%= image %>"
                                onclick="updateMainImage(this,'<%= image %>')">
                            </div>
                            <% }) %>
                    </div>
                    <!--social media share-->
                    <div class="social-share mt-4 d-flex align-items-center">
                        <span class="me-3 fw-bold">Share:</span>
                        <div class="social-icons d-flex">
                            <a href="#" class="social-icon me-2"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" class="social-icon me-2"><i class="fab fa-twitter"></i></a>
                            <a href="#" class="social-icon me-2"><i class="fab fa-instagram"></i></a>
                            <a href="#" class="social-icon"><i class="fab fa-pinterest-p"></i></a>
                        </div>
                    </div>
                </div>
            </div>

            <!--product details section-->
            <div class="col-lg-6 col-md-6">
                <div class="detail-info p-4 bg-white rounded shadow-sm">
                    <h1 class="product-title mb-3">
                        <%= productData.productName %>
                    </h1>

                    <!-- category and rating-->
                    <div class="product-meta d-flex justify-content-between align-items-center mb-3 p-3 bg-light rounded">
                        <div class="product-category">
                            <span class="badge bg-dark px-3 py-2 rounded-pill">
                                <%= productData.category.name %>
                            </span>
                        </div>
                        <div class="product-rating d-flex align-items-center">
                            <div class="stars me-2">
                                <i class="fas fa-star text-warning"></i>
                                <i class="fas fa-star text-warning"></i>
                                <i class="fas fa-star text-warning"></i>
                                <i class="fas fa-star text-warning"></i>
                                <i class="fas fa-star-half-alt text-warning"></i>
                            </div>
                            <span class="text-muted small">(25 reviews)</span>
                        </div>
                    </div>

                    <!-- price -->
                    <div class="product-price-wrap mb-4">
                        <div class="product-price d-flex align-items-center">
                            <span class="current-price fw-bold fs-3 text-dark me-3">₹<%= productData.salePrice %></span>
                            <span class="old-price text-decoration-line-through text-muted fs-5">₹<%= productData.regularPrice %></span>
                            <span class="discount-badge ms-3 badge bg-danger"><%= productData.offer.value %>% Off</span>
                        </div>
                    </div>
                    <div class="separator my-4"></div>

                    <!-- Product description -->
                    <div class="product-description mb-4">
                        <p class="text-muted">
                            <%= productData.description %>
                        </p>
                    </div>

                    <!-- Size selection -->
                     <div class="size-selection mb-4">
                    <h6 class="fw-bold mb-3">Select Size:</h6>
                    <div class="size-options d-flex flex-wrap gap-2">
                        <input type="hidden" id="selectedSizeMain" name="selectedSize" value="">
                        <% if(productData.sizes && productData.sizes.length > 0) { %>
                            <% productData.sizes.sort((a,b) => a.size - b.size).forEach(sizeData => { %>
                            <button type="button" 
                            class="btn btn-outline-dark size-btn me-2" 
                            onclick="handleSizeSelect('<%= sizeData.size %>', '<%= sizeData.quantity %>')"
                            data-size="<%= sizeData.size %>"
                            <%= sizeData.quantity === 0 ? 'disabled' : '' %>>
                            <%= sizeData.size %>
                        </button>
                                <% }) %>
                            <% }else{ %>
                                <p class="text-muted">No sizes available</p>
                                <% } %>
                    </div>
                    </div>
                    <!--div for display quantity-->
                    <!--<div id="qtyInfo" class="alert alert-info" style="display: none;">
                        Size <span id="sizeValue"></span>: <span id="qtyValue"></span>available
                    </div>-->
                    <!--div for display quantity-->
                    <!--<div id="qtyInfo" class="alert alert-info" style="display: none;">
                        Size <span id="sizeValue"></span>: <span id="qtyValue"></span> pairs available
                    </div>-->

                    <!--add quantity display section-->
                    <div id="quantityInfo" class="quantity-info p-3 bg-light rounded mb-4" style="display: none;">
                        <div class="d-flex align-items-center">
                            <h6 class="mb-0 me-2 fw-bold">Available Quantity:</h6>
                            <span id="availableQuantity" class="badge bg-success px-3 py-2"></span>
                        </div>
                    </div>

        <script>
        function handleSizeSelect(size,quantity){
            document.getElementById('selectedSizeMain').value = size;

            document.querySelectorAll('.size-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            const selectedBtn = document.querySelector(`button[data-size="${size}"]`);
            if(selectedBtn){
            selectedBtn.classList.add('active');
            }

            const quantityInfo = document.getElementById('quantityInfo');
            console.log('quantity:',quantityInfo);
            const availableQuantity = document.getElementById('availableQuantity');
            const quantitySelect = document.getElementById('quantity');

            if(quantityInfo && availableQuantity){
                if(quantity > 0) {
                quantityInfo.style.display = 'block';
                availableQuantity.textContent = quantity;

                if(quantitySelect){
                    quantitySelect.innerHTML = '';

                    const maxAllowed = Math.min(quantity,5);
                    for(let i = 1; i <= maxAllowed; i++){
                        const option = document.createElement('option');
                        option.value = i;
                        option.textContent = i;
                        quantitySelect.appendChild(option);
                    }
                }
                }
                else{
                quantityInfo.style.display = 'none';
                }
            }
            // const qtyInfo = document.getElementById('qtyInfo');
            // if(qtyInfo){
            // const sizeValue = document.getElementById('sizeValue');
            // const qtyValue = document.getElementById('qtyValue');

            // if(sizeValue && qtyValue){
            //     sizeValue.textContent = size;
            //     qtyValue.textContent = quantity;
            //     qtyInfo.style.display = 'block';
            // }
            // }
            console.log('selected size:',size);
            console.log('available quantity:',quantity);
        }
    </script>

    <input type="hidden" id="selectedSizeHidden" name="size">

    <!-- Stock Status -->
    <% if (productData.quantity <= 0) { %>
        <div class="alert alert-danger" role="alert">This product is currently out
            of stock.</div>
        <% } %>

        <!-- Product Features -->
        <div class="product-features mb-4">
            <ul class="list-unstyled">
                <li class="d-flex align-items-center mb-3">
                    <i class="fas fa-shield-alt text-dark me-3"></i>
                    <span>1 Year Brand Warranty</span>
                </li>
                <li class="d-flex align-items-center mb-3">
                    <i class="fas fa-undo text-dark me-3"></i>
                    <span>30 Day Return Policy</span>
                </li>
                <li class="d-flex align-items-center">
                    <i class="fas fa-truck text-dark me-3"></i>
                    <span>Cash on Delivery available</span>
                </li>
            </ul>
        </div>

        <!-- action buttons -->
        <div class="product-actions d-flex flex-wrap gap-3 mt-4">
            <button class="btn btn-primary btn-lg px-4 <%= productData.quantity !== 0 ? '' : 'd-none' %>" type="button" id="add" onclick="addToCart('<%= productData._id %>')">
                <i class="fas fa-shopping-cart me-2"></i>
                Add to Cart
            </button>

            <button type="button" class="btn btn-outline-secondary btn-lg wish" id="wish" onclick="addToWishlist('<%= productData._id %>')">
                <i class="fas fa-heart me-2"></i>
                Add to Wishlist
            </button>
            
        </div>
</div>
</div>

    <div class="tab-style3">
        <ul class="nav nav-tabs text-uppercase">
            <li class="nav-item">
                <a class="nav-link active" id="Description-tab" data-bs-toggle="tab"
                    href="#Description">Description</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="Additional-info-tab" data-bs-toggle="tab"
                    href="#Additional-info">Additional info</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="Reviews-tab" data-bs-toggle="tab" href="#Reviews">Reviews
                    (3)</a>
            </li>
        </ul>
                        <div class="tab-content shop_info_tab entry-main-content">
                            <div class="tab-pane fade show active" id="Description">
                                <div>
                                    <p>Uninhibited carnally hired played in whimpered dear gorilla
                                        koala
                                        depending and much yikes off far quetzal goodness and from
                                        for
                                        grimaced goodness unaccountably and meadowlark near
                                        unblushingly
                                        crucial scallop
                                        tightly neurotic hungrily some and dear furiously this
                                        apart.</p>
                                    <p>Spluttered narrowly yikes left moth in yikes bowed this that
                                        grizzly
                                        much hello on spoon-fed that alas rethought much decently
                                        richly and
                                        wow against the frequent fluidly at formidable acceptably
                                        flapped
                                        besides and much circa far over the bucolically hey
                                        precarious
                                        goldfinch mastodon goodness gnashed a jellyfish and one
                                        however
                                        because.
                                    </p>
                                    <ul class="product-more-infor mt-30">
                                        <li><span>Type Of Packing</span> Bottle</li>
                                        <li><span>Color</span> Green, Pink, Powder Blue, Purple</li>
                                        <li><span>Quantity Per Case</span> 100ml</li>
                                        <li><span>Ethyl Alcohol</span> 70%</li>
                                        <li><span>Piece In One</span> Carton</li>
                                    </ul>
                                    <hr class="wp-block-separator is-style-dots">
                                    <p>Laconic overheard dear woodchuck wow this outrageously taut
                                        beaver
                                        hey hello far meadowlark imitatively egregiously hugged that
                                        yikes
                                        minimally unanimous pouted flirtatiously as beaver beheld
                                        above
                                        forward
                                        energetic across this jeepers beneficently cockily less a
                                        the
                                        raucously that magic upheld far so the this where crud then
                                        below
                                        after jeez enchanting drunkenly more much wow callously
                                        irrespective
                                        limpet.</p>
                                    <h4 class="mt-30">Packaging & Delivery</h4>
                                    <hr class="wp-block-separator is-style-wide">
                                    <p>Less lion goodness that euphemistically robin expeditiously
                                        bluebird
                                        smugly scratched far while thus cackled sheepishly rigid
                                        after due
                                        one assenting regarding censorious while occasional or this
                                        more
                                        crane
                                        went more as this less much amid overhung anathematic
                                        because much
                                        held one exuberantly sheep goodness so where rat wry well
                                        concomitantly.
                                    </p>
                                    <p>Scallop or far crud plain remarkably far by thus far iguana
                                        lewd
                                        precociously and and less rattlesnake contrary caustic wow
                                        this near
                                        alas and next and pled the yikes articulate about as less
                                        cackled
                                        dalmatian
                                        in much less well jeering for the thanks blindly sentimental
                                        whimpered less across objectively fanciful grimaced wildly
                                        some wow
                                        and rose jeepers outgrew lugubrious luridly irrationally
                                        attractively
                                        dachshund.
                                    </p>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="Reviews">
                                <!--comments-->
                                <div class="comments-area">
                                    <div class="row">
                                        <div class="col-lg-8">
                                            <h4 class="mb-40">Customer questions & answers</h4>
                                            <div class="comment-list">
                                                <div class="single-comment justify-content-between d-flex">
                                                    <div class="user justify-content-between d-flex">
                                                        <div class="thumb text-center">
                                                            <img src="assets/imgs/page/avatar-6.jpg" alt="">
                                                            <h6><a href="#">Jacky Chan</a></h6>
                                                            <p class="font-xxs">Since 2012</p>
                                                        </div>
                                                        <div class="desc">
                                                            <div class="product-rate d-inline-block">
                                                                <div class="product-rating" style="width:90%">
                                                                </div>
                                                            </div>
                                                            <p>Thank you very fast shipping from
                                                                Poland only
                                                                3days.</p>
                                                                <div class="d-flex justify-content-between">
                                                                    <div class="d-flex align-items-center">
                                                                        <p class="font-xs mr-30">
                                                                            December 4,
                                                                            2020 at 3:12 pm </p>
                                                                        <a href="#" class="text-brand btn-reply">Reply
                                                                            <i class="fi-rs-arrow-right"></i>
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--single comment-->
                                                <div class="single-comment justify-content-between d-flex">
                                                    <div class="user justify-content-between d-flex">
                                                        <div class="thumb text-center">
                                                            <img src="assets/imgs/page/avatar-7.jpg" alt="">
                                                            <h6><a href="#">Ana Rosie</a></h6>
                                                            <p class="font-xxs">Since 2008</p>
                                                        </div>
                                                        <div class="desc">
                                                            <div class="product-rate d-inline-block">
                                                                <div class="product-rating" style="width:90%">
                                                                </div>
                                                            </div>
                                                            <p>Great low price and works well.</p>
                                                            <div class="d-flex justify-content-between">
                                                                <div class="d-flex align-items-center">
                                                                    <p class="font-xs mr-30">
                                                                        December 4,
                                                                        2020 at 3:12 pm </p>
                                                                    <a href="#" class="text-brand btn-reply">Reply
                                                                        <i class="fi-rs-arrow-right"></i>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--single comment-->
                                                <div class="single-comment justify-content-between d-flex">
                                                    <div class="user justify-content-between d-flex">
                                                        <div class="thumb text-center">
                                                            <img src="assets/imgs/page/avatar-7.jpg" alt="">
                                                            <h6><a href="#">Ana Rosie</a></h6>
                                                            <p class="font-xxs">Since 2008</p>
                                                        </div>
                                                        <div class="desc">
                                                            <div class="product-rate d-inline-block">
                                                                <div class="product-rating" style="width:90%">
                                                                </div>
                                                            </div>
                                                            <p>Great low price and works well.</p>
                                                            <div class="d-flex justify-content-between">
                                                                <div class="d-flex align-items-center">
                                                                    <p class="font-xs mr-30">
                                                                        December 4,
                                                                        2020 at 3:12 pm </p>
                                                                    <a href="#" class="text-brand btn-reply">Reply
                                                                        <i class="fi-rs-arrow-right"></i>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--comment form-->
                                    <div class="comment-form">
                                        <h4 class="mb-15">Add a review</h4>
                                        <div class="product-rate d-inline-block mb-30">
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-8 col-md-12">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            
            </div>
            <div class="col-12">
                <h3 class="section-title style-1 mb-30">Related products</h3>
            </div>
            <div class="row Related-products">
                <% relatedProducts.forEach(product =>{ %>
                <div class="col-lg-3 col-md-4 col-12 col-sm-6">
                    <div class="product-cart-wrap small hover-up">
                        <div class="product-img-action-wrap">
                            <div class="product-img product-img-zoom">
                                <a href="/productdetails/<%= product._id %>" tabindex="0">
                                    <img class="default-img" src="/uploads/re-images/<%= product.productImage[0] %>" alt="relproductimg">
                                </a>
                            </div>
                        </div>
                        <div class="product-content-wrap">
                            <h2><a href="/products/<%= product._id %>" tabindex="0">
                                <%= product.productName %>
                            </a></h2>
                        <div class="rating-result" title="<%= product.rating * 20 %>%">

                        </div>
                        <div class="product-price">
                            <span>$<%= product.salePrice %> </span>

                            <span class="old-price"><%= product.regularPrice %></span>

                        </div>
                        </div>
                    </div>
                </div>
                <% }) %>
            </div>
        </div>
    </section>
    <%- include("../partials/user/footer") %>
</main>
<script>
    function updateMainImage(selectedThumbnail, imageSrc){
        document.getElementById('zoomable-image').src = '/uploads/re-images/' + imageSrc;
        document.querySelectorAll('.Thumbnail').forEach(thumbnail => {
            thumbnail.classList.remove('active');
        });
        selectedThumbnail.classList.add('active');
    }
    document.addEventListener("DOMContentLoaded", function(){
        const firstThumbnail = document.querySelector('.Thumbnail');
        if(firstThumbnail){
            firstThumbnail.classList.add('active');
        }
    });
    const zoomFactor = 2.5;

    function zoomIn(event){
        const zoomableImage = document.getElementById('zoomable-image');

        const rect = zoomableImage.getBoundingClientRect();

        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;

        const originX = (x / rect.width) * 100;
        const originY = (y / rect.height) * 100;

        zoomableImage.style.transformOrigin = `${originX}% ${originY}%`;
        zoomableImage.style.transform = `scale(${zoomFactor})`;
    }
    function resetZoom() {
            const zoomableImage = document.getElementById('zoomable-image');
            zoomableImage.style.transform = 'scale(1)';
        }

    function addToCart(productId) {
        const selectedSize = document.getElementById('selectedSizeMain').value;
        console.log('selected size is:',selectedSize);
        if(!selectedSize){
            console.log('size is not selected')
            swal.fire({
                icon: 'warning',
                title: 'Please select a size',
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: 3000,
                timerProgressBar: true,
                background: '#ffcccc'
            });
            return;
        }

        axios.post('/addToCart', {productId,size: selectedSize,quantity:1})
        .then(response =>{
            if(response.data.success){
                Swal.fire('success',response.data.message,'success'); 
            }
            else{
                swal.fire('Error',response.data.message,'error')
            }
        })
        .catch(error => {
            console.error('Error adding to cart:', error);
            swal.fire('Error','Something went wrong. Please try again later','error');
        })
    }   
    
    function addToWishlist(productId){
        axios.post('/addToWishlist',{productId})
        .then(response => {
            console.log('response:',response);
            if(response.data.success){
                Swal.fire({
                    icon:'success',
                    toast:true,
                    title:response.data.message,
                    position:'top-end',
                    showConfirmButton:false,
                    timer:3000,
                    timerProgressBar:true,
                })
            }
            else{
                Swal.fire({
                    icon:'error',
                    toast:true,
                    title:response.data.message,
                    position:'top-end',
                    showConfirmButton:false,
                    timer:3000,
                    timerProgressBar:true,
                })
            }
        })
        .catch(error => {
            console.error('Error adding to wishlist:',error);
            Swal.fire('Error','Something went wrong. Please try again later','error');
        })
    }
</script>
<!-- Bootstrap JS -->